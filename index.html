<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SparkReceipt Financial Dashboard</title>
  <meta name="description"
    content="Deep-dive financial analytics dashboard powered by SparkReceipt data. Analyze spending by category and institution.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.0.379/build/pdf.min.mjs" type="module"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
  <link rel="stylesheet" href="src/styles/index.css">
</head>

<body>
  <div id="app">
    <!-- Navigation -->
    <nav class="nav" id="mainNav">
      <div class="nav-brand">
        <div class="nav-logo">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
            <rect width="28" height="28" rx="8" fill="url(#logo-grad)" />
            <path d="M8 14L12 10L16 14L20 8" stroke="white" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
            <path d="M8 20H20" stroke="white" stroke-width="2" stroke-linecap="round" opacity="0.6" />
            <defs>
              <linearGradient id="logo-grad" x1="0" y1="0" x2="28" y2="28">
                <stop stop-color="#6366f1" />
                <stop offset="1" stop-color="#8b5cf6" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <span class="nav-title">SparkReceipt</span>
      </div>
      <div class="nav-tabs">
        <button class="nav-tab active" data-view="dashboard" id="tabDashboard">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7" rx="1" />
            <rect x="14" y="3" width="7" height="7" rx="1" />
            <rect x="3" y="14" width="7" height="7" rx="1" />
            <rect x="14" y="14" width="7" height="7" rx="1" />
          </svg>
          Dashboard
        </button>
        <button class="nav-tab" data-view="institutions" id="tabInstitutions">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 21h18M3 10h18M5 6l7-3 7 3M4 10v11M20 10v11M8 14v3M12 14v3M16 14v3" />
          </svg>
          Institutions
        </button>
        <button class="nav-tab" data-view="transactions" id="tabTransactions">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
            <polyline points="14 2 14 8 20 8" />
            <line x1="16" y1="13" x2="8" y2="13" />
            <line x1="16" y1="17" x2="8" y2="17" />
          </svg>
          Transactions
        </button>
        <button class="nav-tab" data-view="payments" id="tabPayments">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="1" y="4" width="22" height="16" rx="2" />
            <line x1="1" y1="10" x2="23" y2="10" />
          </svg>
          Payments
        </button>
        <button class="nav-tab" data-view="meeting" id="tabMeeting">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          Meetings
        </button>
      </div>
    </nav>

    <!-- Login View -->
    <section class="view login-view active" id="loginView">
      <div class="login-container">
        <div class="login-card">
          <div class="login-header">
            <div class="login-logo">
              <svg width="48" height="48" viewBox="0 0 28 28" fill="none">
                <rect width="28" height="28" rx="8" fill="url(#login-grad)" />
                <path d="M8 14L12 10L16 14L20 8" stroke="white" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round" />
                <path d="M8 20H20" stroke="white" stroke-width="2" stroke-linecap="round" opacity="0.6" />
                <defs>
                  <linearGradient id="login-grad" x1="0" y1="0" x2="28" y2="28">
                    <stop stop-color="#6366f1" />
                    <stop offset="1" stop-color="#8b5cf6" />
                  </linearGradient>
                </defs>
              </svg>
            </div>
            <h1 class="login-title">Welcome Back</h1>
            <p class="login-subtitle">Sign in to access your financial dashboard</p>
          </div>
          <form class="login-form" id="loginForm">
            <div class="form-group">
              <label class="form-label">Email Address</label>
              <input type="email" class="form-input" id="loginEmail" placeholder="name@example.com"
                value="demo@sparkreceipt.com" required>
            </div>
            <div class="form-group">
              <label class="form-label">Password</label>
              <input type="password" class="form-input" id="loginPassword" placeholder="••••••••" value="password123"
                required>
            </div>
            <div class="login-options">
              <label class="checkbox-label">
                <input type="checkbox" checked>
                <span>Remember me</span>
              </label>
              <a href="#" class="login-link">Forgot password?</a>
            </div>
            <button type="submit" class="btn btn-primary login-btn" id="loginBtn">
              Sign In
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </button>
            <div class="login-footer">
              <p>Don't have an account? <a href="#" class="login-link">Create one</a></p>
              <div class="login-security">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                Secure 256-bit Encryption
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Upload View -->
    <section class="view upload-view" id="uploadView">
      <div class="upload-container">
        <div class="upload-hero">
          <div class="upload-icon-wrapper">
            <svg class="upload-icon" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="1.5">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="17 8 12 3 7 8" />
              <line x1="12" y1="3" x2="12" y2="15" />
            </svg>
          </div>
          <h1 class="upload-title">Import Your Financial Data</h1>
          <p class="upload-subtitle">Drop your SparkReceipt CSV or PDF export to analyze spending</p>
        </div>
        <div class="drop-zone" id="dropZone">
          <div class="drop-zone-content">
            <div class="drop-zone-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14 2 14 8 20 8" />
              </svg>
            </div>
            <p class="drop-zone-text">Drag & drop your file here</p>
            <p class="drop-zone-hint">CSV or PDF • Max 10MB</p>
            <button class="btn btn-primary" id="browseBtn">Browse Files</button>
            <input type="file" id="fileInput" accept=".csv,.pdf" hidden>
          </div>
          <div class="drop-zone-progress" id="uploadProgress">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text" id="progressText">Processing...</p>
          </div>
        </div>
        <button class="btn btn-ghost" id="loadSampleBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12a9 9 0 11-6.219-8.56" />
          </svg>
          Load Sample Data
        </button>
      </div>
    </section>

    <!-- Dashboard View -->
    <section class="view dashboard-view" id="dashboardView">
      <div class="dashboard-header">
        <div>
          <h2 class="view-title">Spending Overview</h2>
          <p class="view-subtitle" id="dateRange"></p>
        </div>
        <button class="btn btn-outline" id="importNewBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="17 8 12 3 7 8" />
            <line x1="12" y1="3" x2="12" y2="15" />
          </svg>
          Import New
        </button>
      </div>

      <!-- Summary Cards -->
      <div class="summary-cards" id="summaryCards"></div>

      <!-- Charts Row -->
      <div class="charts-row">
        <div class="chart-card">
          <h3 class="card-title">Spending by Category</h3>
          <div class="chart-wrapper">
            <canvas id="categoryChart"></canvas>
          </div>
        </div>
        <div class="chart-card">
          <h3 class="card-title">Daily Spending Trend</h3>
          <div class="chart-wrapper">
            <canvas id="trendChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Category Breakdown -->
      <div class="category-breakdown" id="categoryBreakdown">
        <h3 class="section-title">Category Deep Dive</h3>
        <div class="category-list" id="categoryList"></div>
      </div>

      <!-- Category Deep Dive Modal -->
      <div class="modal-overlay" id="categoryModal">
        <div class="modal" id="categoryModalContent"></div>
      </div>
    </section>

    <!-- Institutions View -->
    <section class="view institutions-view" id="institutionsView">
      <div class="dashboard-header">
        <h2 class="view-title">Institution Analysis</h2>
        <p class="view-subtitle">Spending breakdown by financial institution</p>
      </div>
      <div id="institutionContent"></div>
    </section>

    <!-- Transactions View -->
    <section class="view transactions-view" id="transactionsView">
      <div class="dashboard-header">
        <div>
          <h2 class="view-title">All Transactions</h2>
          <p class="view-subtitle" id="txnCount"></p>
        </div>
        <div class="filter-bar" id="filterBar"></div>
      </div>
      <div class="table-container" id="transactionTable"></div>
    </section>

    <!-- Payments View -->
    <section class="view payments-view" id="paymentsView">
      <div class="dashboard-header">
        <h2 class="view-title">Payments</h2>
        <p class="view-subtitle">Send payments using your linked accounts</p>
      </div>
      <div id="paymentContent"></div>
    </section>

    <!-- Meeting Detail View -->
    <section class="view meeting-view" id="meetingView">
      <div id="meetingViewContent"></div>
    </section>
  </div>

  <script src="src/data/csvParser.js"></script>
  <script src="src/data/pdfParser.js"></script>
  <script src="src/data/fileParser.js"></script>
  <script src="src/data/categorizer.js"></script>
  <script src="src/data/analyzer.js"></script>
  <script src="src/data/accountManager.js"></script>
  <script src="src/components/Dashboard.js"></script>
  <script src="src/components/CategoryDeepDive.js"></script>
  <script src="src/components/InstitutionAnalysis.js"></script>
  <script src="src/components/TransactionTable.js"></script>
  <script src="src/components/PaymentManager.js"></script>
  <script src="src/data/aiEngine.js"></script>
  <script src="src/components/Chatbot.js"></script>
  <script src="src/components/Login.js"></script>
  <script src="src/components/ShareManager.js"></script>
  <script src="src/components/ExportManager.js"></script>
  <script src="src/components/FilterManager.js"></script>
  <script src="src/components/VoiceManager.js"></script>
  <script src="src/components/BankLinkManager.js"></script>
  <script src="src/data/meetingData.js"></script>
  <script src="src/components/MeetingView.js"></script>
  <script src="src/main.js"></script>
</body>

</html>